(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{26:function(e,t,a){e.exports=a(38)},31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),o=a.n(r),s=(a(31),a(32),a(6)),l=a(1),u=function(){var e=Object(l.e)().pathname,t=Object(l.g)("/users/:userId/albums/:albumId"),a=e.split("/")[2];return c.a.createElement("nav",{className:"navbar navbar-dark bg-success","aria-label":"breadcrumb"},c.a.createElement("div",{className:"container"},c.a.createElement("ol",{className:"breadcrumb bg-transparent font-weight-bold mb-0"},c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement(s.b,{className:"text-white",to:"/"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),t&&c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement(s.b,{className:"text-white",to:"/users/".concat(a,"/albums")},"\u0410\u043b\u044c\u0431\u043e\u043c\u044b")))))},i=a(2),m=a(22),d=a(23),b=function(e){return fetch("".concat("https://jsonplaceholder.typicode.com").concat(e)).then((function(e){if(e.status<400)return e.json();throw e})).catch((function(e){return e.json().then((function(e){throw e}))}))},E=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,null,[{key:"getUsers",value:function(){return b("/users")}},{key:"getAlbumsByUserId",value:function(e){return b("/users/".concat(e,"/albums"))}},{key:"getPhotosByAlbumId",value:function(e){return b("/albums/".concat(e,"/photos"))}}]),e}(),h=function(e){return{type:"FETCH_USERS_SUCCESS",payload:e}},p=function(e){return{type:"FETCH_ALBUMS_BY_USER_ID_SUCCESS",payload:e}},f=function(e){return function(t){t({type:"FETCH_PHOTO_BY_ALBUM_ID"}),E.getPhotosByAlbumId(e).then((function(a){t(_(e,a))})).catch((function(){t({type:"FETCH_PHOTO_BY_ALBUM_ID_ERROR"})}))}},_=function(e,t){return{type:"FETCH_PHOTO_BY_ALBUM_ID_SUCCESS",payload:{albumId:e,photos:t}}},v=function(e){var t=e.user;return c.a.createElement("div",{className:"card shadow"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},t.name),c.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},t.username),c.a.createElement(s.b,{to:"/users/".concat(t.id,"/albums"),className:"btn btn-success"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u043b\u044c\u0431\u043e\u043c\u043e\u0432")))},O=function(){return c.a.createElement("div",{className:"d-flex justify-content-center m-5 w-100"},c.a.createElement("div",{className:"spinner-border text-success",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},g=function(){var e=Object(i.c)((function(e){return e.users})),t=Object(i.c)((function(e){return e.isLoadingUsers})),a=Object(i.b)();return Object(n.useEffect)((function(){a((function(e){e({type:"FETCH_USERS"}),E.getUsers().then((function(t){e(h(t))})).catch((function(){e({type:"FETCH_USERS_ERROR"})}))}))}),[a]),c.a.createElement("div",{className:"row"},t?c.a.createElement(O,null):e.map((function(e){return c.a.createElement("div",{key:e.id,className:"col-3 mt-4"},c.a.createElement(v,{user:e}))})))},y=function(e){var t,a,r=e.album,o=r.id,l=Object(i.c)((function(e){var t;return null!==(t=e.photos[o])&&void 0!==t?t:[]})),u=Object(i.b)();Object(n.useEffect)((function(){u(f(o))}),[o,u]);var m=l[0],d=null!==(t=null===m||void 0===m?void 0:m.thumbnailUrl)&&void 0!==t?t:"",b=null!==(a=l.length)&&void 0!==a?a:0;return c.a.createElement("div",{className:"card border-0 bg-secondary shadow card-picture",style:{backgroundImage:"url(".concat(d,")")}},c.a.createElement(s.b,{to:"/users/".concat(r.userId,"/albums/").concat(o)},c.a.createElement("div",{className:"card-img-overlay"},c.a.createElement("small",{className:"card-text text-center text-white"},"\u0412 \u0430\u043b\u044c\u0431\u043e\u043c\u0435 ",b," \u0444\u043e\u0442\u043e"),c.a.createElement("h5",{className:"card-title text-uppercase text-white"},r.title))))},S=function(){var e=Object(i.c)((function(e){return e.isLoadingAlbums})),t=Object(i.c)((function(e){return e.albums})),a=Object(l.f)().userId,r=Object(i.b)();return Object(n.useEffect)((function(){r(function(e){return function(t){t({type:"FETCH_ALBUMS_BY_USER_ID"}),E.getAlbumsByUserId(e).then((function(e){t(p(e))})).catch((function(){t({type:"FETCH_ALBUMS_BY_USER_ID_ERROR"})}))}}(a))}),[a,r]),c.a.createElement("div",{className:"row"},e?c.a.createElement(O,null):t.map((function(e){return c.a.createElement("div",{key:e.id,className:"col-3 mt-4"},c.a.createElement(y,{album:e}))})))},N=a(17),j=c.a.memo((function(e){var t,a,n=e.photo,r=e.onClick,o=null!==(t=null===n||void 0===n?void 0:n.thumbnailUrl)&&void 0!==t?t:"";return c.a.createElement("div",{className:"card border-0 bg-secondary shadow card-picture",style:{backgroundImage:"url(".concat(o,")")},onClick:r},c.a.createElement("div",{className:"card-img-overlay"},c.a.createElement("h6",{className:"card-title text-uppercase text-white"},null!==(a=null===n||void 0===n?void 0:n.title)&&void 0!==a?a:"")))}),(function(e,t){return e.photo===t.photo})),U=function(e){var t=e.photo,a=e.closeAction,n=e.next,r=e.previous;return c.a.createElement("div",{className:"modal modal-block",role:"dialog"},c.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h5",{className:"modal-title text-uppercase",id:"exampleModalLabel"},t.title),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},c.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),c.a.createElement("div",{className:"modal-body"},c.a.createElement("img",{className:"img-fluid",width:"600",height:"600",src:t.url,alt:t.title})),c.a.createElement("div",{className:"modal-footer d-flex justify-content-between"},c.a.createElement("button",{onClick:r,type:"button",className:"btn btn-success","data-dismiss":"modal"},c.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"})),c.a.createElement("button",{onClick:n,type:"button",className:"btn btn-success"},c.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}))))))},C=function(){var e,t=Object(l.f)().albumId,a=null!==(e=Object(i.c)((function(e){return e.photos[t]})))&&void 0!==e?e:[],r=Object(i.b)();Object(n.useEffect)((function(){r(f(t))}),[t,r]);var o=Object(i.c)((function(e){return e.isLoadingPhotos})),s=function(e){var t=Object(n.useState)(!1),a=Object(N.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(null),s=Object(N.a)(o,2),l=s[0],u=s[1];return{modalPhoto:{show:c,open:function(e){u(e),r(!0)},close:function(){u(null),r(!1)}},showNextPhoto:function(){u((function(t){return(t+1)%e.length}))},showPreviousPhoto:function(){u((function(t){return(t-1+e.length)%e.length}))},currentPhotoIndex:l}}(a),u=s.modalPhoto,m=s.currentPhotoIndex,d=s.showNextPhoto,b=s.showPreviousPhoto;return c.a.createElement("div",{className:"row"},o?c.a.createElement(O,null):a.map((function(e,t){return c.a.createElement("div",{key:e.id,className:"col-3 mt-4"},c.a.createElement(j,{photo:e,onClick:function(){return u.open(t)}}))})),u.show&&c.a.createElement(U,{photo:a[m],closeAction:u.close,next:d,previous:b}))},I=function(){return c.a.createElement(s.a,{basename:"/photo-gallery"},c.a.createElement("div",{className:"App"},c.a.createElement(u,null),c.a.createElement("div",{className:"container"},c.a.createElement(l.a,{exact:!0,path:"/",component:g}),c.a.createElement(l.a,{exact:!0,path:"/users/:userId/albums",component:S}),c.a.createElement(l.a,{path:"/users/:userId/albums/:albumId",component:C}))))},R=a(8),B=a(24),L=a(25),w=a(12),x=a(5),T={users:[],albums:[],photos:{},isLoadingUsers:!1,isLoadingAlbums:!1,isLoadingPhotos:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(x.a)({},e,{isLoadingUsers:!0});case"FETCH_ALBUMS_BY_USER_ID":return Object(x.a)({},e,{isLoadingAlbums:!0});case"FETCH_PHOTO_BY_ALBUM_ID":return Object(x.a)({},e,{isLoadingPhotos:!0});case"FETCH_USERS_SUCCESS":return Object(x.a)({},e,{users:t.payload,isLoadingUsers:!1});case"FETCH_ALBUMS_BY_USER_ID_SUCCESS":return Object(x.a)({},e,{albums:t.payload,isLoadingAlbums:!1});case"FETCH_PHOTO_BY_ALBUM_ID_SUCCESS":return Object(x.a)({},e,{photos:Object(x.a)({},e.photos,Object(w.a)({},t.payload.albumId,t.payload.photos)),isLoadingPhotos:!1});case"FETCH_USERS_ERROR":return Object(x.a)({},e,{users:[],isLoadingUsers:!1});case"FETCH_ALBUMS_BY_USER_ID_ERROR":return Object(x.a)({},e,{albums:[],isLoadingAlbums:!1});case"FETCH_PHOTO_BY_ALBUM_ID_ERROR":return Object(x.a)({},e,{isLoadingPhotos:!1});default:return e}},H=Object(R.createStore)(A,Object(L.composeWithDevTools)(Object(R.applyMiddleware)(B.a)));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:H},c.a.createElement(I,null))),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.8f81c4ab.chunk.js.map